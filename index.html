<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="skulpt_dist/skulpt.min.js" type="text/javascript"></script>
    <script src="skulpt_dist/skulpt-stdlib.js" type="text/javascript"></script>
</head>

<body>
<div id="mycanvas" class="col-md-offset-4">
</div>
<textarea id="code" rows="24" cols="80">
import math, random
import pygame as pg

pg.init()

pg.display.set_caption("krugovi na dijagonali")
(sirina, visina) = (400, 500)
prozor = pg.display.set_mode((sirina, visina), pg.FULLSCREEN)


def nasumicna_boja():
    return random.randint(0, 255), random.randint(0, 255), random.randint(0, 255)


def crtaj():
    r = d / (2 * n)
    kx = sirina / (2 * n)
    ky = visina / (2 * n)
    prozor.fill(pg.Color("white"))
    for i in range(n):
        (cx, cy) = ((2 * i + 1) * kx, visina - (2 * i + 1) * ky)
        pg.draw.circle(prozor, nasumicna_boja(), (round(cx), round(cy)), round(r), 2)
    pg.display.update()


d = math.sqrt(sirina ** 2 + visina ** 2)

n = 5
crtaj()

kraj = False
while not kraj:
    dogadjaj = pg.event.wait()
    if dogadjaj.type == pg.QUIT:
        kraj = True
    elif dogadjaj.type == pg.MOUSEBUTTONDOWN:
        if dogadjaj.button == 1:
            n += 1
            crtaj()
        elif dogadjaj.button == 3 and n > 1:
            n -= 1
            crtaj()
    if dogadjaj.type == pg.KEYDOWN:
        if dogadjaj.key == pg.K_UP:
            n += 1
            crtaj()
        elif dogadjaj.key == pg.K_DOWN and n > 1:
            n -= 1
            crtaj()

pg.quit()

</textarea>
<pre id="output"></pre>

<script>
    var basePath = 'https://rawgit.com/Petlja/pygame4skulpt/refaktorizacija/pygame/';
    Sk.externalLibraries = {
        'pygame': {
            path: basePath + '__init__.js',
        },
        'pygame.display': {
            path: basePath + 'display.js',
        },
        'pygame.draw': {
            path: basePath + 'draw.js',
        },
        'pygame.event': {
            path: basePath + 'event.js',
        },
        'pygame.font': {
            path: basePath + 'font.js',
        },
        'pygame.image': {
            path: basePath + 'image.js',
        },
        'pygame.key': {
            path: basePath + 'key.js',
        },
        'pygame.mouse': {
            path: basePath + 'mouse.js',
        },
        'pygame.time': {
            path: basePath + 'time.js',
        },
        'pygame.transform': {
            path: basePath + 'transform.js',
        },
        'pygame.version': {
            path: basePath + 'version.js',
        },

    };

    function printString(text) {
        var output = document.getElementById("output");
        text = text.replace(/</g, '&lt;');
        output.innerHTML = output.innerHTML + text;
    }

    function clearOutput() {
        var output = document.getElementById("output");
        output.innerHTML = '';
    }

    function builtinRead(x) {
        if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
            throw "File not found: '" + x + "'";
        return Sk.builtinFiles["files"][x];
    }

    function runCode() {
        var prog = $("#code").text();
        Sk.misceval.asyncToPromise(function () {
            try {
                return Sk.importMainWithBody("<stdin>", false, prog, true);
            } catch (e) {
                alert(e)
            }
        });
    }

    (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
    Sk.configure({read: builtinRead, output: printString});
    runCode();
</script>
</body>
</html>

