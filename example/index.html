<html>
  <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
    <script src="../skulpt_dist/skulpt.min.js" type="text/javascript"></script>
    <script src="../skulpt_dist/skulpt-stdlib.js" type="text/javascript"></script>
    <script src="../pygamelib/pygamelib.js" type="text/javascript"></script>
  </head>

  <body>
    <div>
        <canvas id="mycanvas"  height="200" width="200" style="border-style: solid;">
        </canvas>
    </div>

<textarea id="code" rows="24" cols="80">
import turtle
import pygame
import time
pygame.init()
s = pygame.Surface([300, 300])
print("sirina ", s.get_width())
print("visina ", s.get_height())
print("proba")
print(s)
screen = pygame.display.set_mode([200, 200])
print(screen)
print(screen.get_width())

c = pygame.Color(1, 2, 3, 4)
c.set_r(c.r + 4)
print(c)

r = pygame.Rect(10, 10, 20, 20)
print(r)

pygame.draw.line(screen, (255, 0, 0, 0) , [10, 10], [50, 50], 5)

e = pygame.event.Event(5,{"key":22})
print(e)
print(e.key)

done = False
is_blue = True
x = 30
y = 30

while not done:
        for event in pygame.event.get():
                if event.type == pygame.QUIT:
                        print("gotova petlja")
                        done = True
                if event.type == pygame.KEYDOWN:
                        print("otkucano: "+ str(event.key))
        time.sleep(1)

print("A sada malo kornjace")
wn = turtle.Screen()

babbage = turtle.Turtle()
babbage.shape("triangle")

n = 8
angle = 360/n

for i in range(n):
    babbage.right(angle)
    babbage.forward(90)
    babbage.stamp()

wn.exitonclick()
</textarea>
<pre id="output"></pre>

    <script>
    function printString(text)
    {
        var output = document.getElementById("output");
        text = text.replace(/</g, '&lt;');
        output.innerHTML = output.innerHTML + text;
    }

    function clearOutput() {
       var output = document.getElementById("output");
       output.innerHTML = '';
    }

    function builtinRead(x) {
	    if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
		    throw "File not found: '" + x + "'";
	    return Sk.builtinFiles["files"][x];
	}
    function runCode() {
        var prog = $("#code").text();
        Sk.misceval.asyncToPromise(function() {
            try {
                return Sk.importMainWithBody("<stdin>",false,prog,true);
            } catch(e) {
                alert(e)
            }
        });
    }
    PygameLib.init("../pygamelib",  document.getElementById("mycanvas"));
    (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
    Sk.configure({ read: builtinRead, output:printString });
    runCode();
    </script>
  </body>
</html>

